# Домашнее задание к занятию 12.8. «Резервное копирование баз данных» - Громченко Иван

### Задание 1. Резервное копирование

### Кейс
Финансовая компания решила увеличить надёжность работы баз данных и их резервного копирования. 

Необходимо описать, какие варианты резервного копирования подходят в случаях: 

1.1. Необходимо восстанавливать данные в полном объёме за предыдущий день.
**- В данном случае целесообразно производить полное резервное копирование каждые выходные (например в воскресенье) и инкрементное/диффиренциальное каждой ночью.**

1.2. Необходимо восстанавливать данные за час до предполагаемой поломки.
**- В данном случае целесообразно производить полное резервное копирование каждой ночью и инкрементное/диффиренциальное каждый час.**

1.3.* Возможен ли кейс, когда при поломке базы происходило моментальное переключение на работающую или починенную базу данных.
**- Наиболее быстрый способ восстановления доступа к базе данных в случае её отказа - переключение на синхронную реплику, но даже оно происходит не мгновенно по меркам человеческого восприятия (10-30 секунд).
Однако, именно такой способ резервирования окажет минимальное негативное воздествие на предоставляемый сервис.**

*Приведите ответ в свободной форме.*

---

### Задание 2. PostgreSQL

2.1. С помощью официальной документации приведите пример команды резервирования данных и восстановления БД (pgdump/pgrestore).
**- Предлагаю такой вариант:**
```bash
pg_dump -U postgres my_db > my_db.sql
psql -f my_db.sql
```
2.1.* Возможно ли автоматизировать этот процесс? Если да, то как?
**- Создание дампов можно автоматизировать путем простейших скриптов и cron. Восстановление же из резерных копий нужно делать только вручную.**

*Приведите ответ в свободной форме.*

---

### Задание 3. MySQL

3.1. С помощью официальной документации приведите пример команды инкрементного резервного копирования базы данных MySQL.
```bash
mysqlbackup --incremental --incremental-base=history:last_backup --backup-dir=/backup --backup-image=my_backup.bi backup-to-image
```
3.1.* В каких случаях использование реплики будет давать преимущество по сравнению с обычным резервным копированием?
**- В случае, когда от доступности базы данных зависит предоставление сервиса пользователям.**

*Приведите ответ в свободной форме.*

---